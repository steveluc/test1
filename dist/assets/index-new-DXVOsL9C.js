(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const t of i)if(t.type==="childList")for(const n of t.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&e(n)}).observe(document,{childList:!0,subtree:!0});function r(i){const t={};return i.integrity&&(t.integrity=i.integrity),i.referrerPolicy&&(t.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?t.credentials="include":i.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function e(i){if(i.ep)return;i.ep=!0;const t=r(i);fetch(i.href,t)}})();let $=50,k=8,C=6,u=[],h=null,b=[],w=null,p=null,I=0,T=-1;function N(o,l){p=o.cloneNode(!0),p.classList.add("drag-ghost"),p.style.width=o.offsetWidth+"px",p.style.height=o.offsetHeight+"px",p.style.left=l.clientX+"px",p.style.top=l.clientY+"px";const r=window.getComputedStyle(o).transform;r&&r!=="none"&&(p.style.transform=r+" translate(-50%, -50%)"),document.body.appendChild(p)}function R(o){p&&(p.style.left=o.clientX+"px",p.style.top=o.clientY+"px")}function H(){p&&(p.remove(),p=null)}function M(o){const r=window.innerHeight>window.innerWidth?o:L(o);u[r].rotation||(u[r].rotation=0),u[r].rotation=(u[r].rotation+90)%360,P()}function j(){const o=window.innerHeight>window.innerWidth,l=o?6:8,r=o?8:6;let e,i;o?(e=window.innerHeight-200,i=window.innerWidth-40):(e=window.innerHeight-30,i=window.innerWidth-320-40);const t=Math.floor((e-20)/r),n=Math.floor((i-20)/l);return Math.max(30,Math.min(t,n,100))}function v(){const o=Math.floor(Math.random()*360),l=60+Math.floor(Math.random()*30),r=60+Math.floor(Math.random()*20);return`hsl(${o}, ${l}%, ${r}%)`}function z(){const o=["solid","horizontal","vertical","diagonal","checkerboard","quartersquare"],l=o[Math.floor(Math.random()*o.length)];if(l==="solid")return{type:"solid",colors:[v()],rotation:0};if(l==="horizontal"||l==="vertical"||l==="diagonal"){const r=[];for(let e=0;e<5;e++)r.push(v());return{type:l,colors:r,rotation:0}}else{if(l==="checkerboard")return{type:"checkerboard",colors:[v(),v()],rotation:0};if(l==="quartersquare")return{type:"quartersquare",colors:[v(),v(),v(),v()],rotation:0}}return{type:"solid",colors:[v()],rotation:0}}function W(){u=[];for(let o=0;o<48;o++)u.push(z())}function O(o){if(o.type==="solid")return o.colors[0];if(o.type==="horizontal"){const r=[];for(let e=0;e<5;e++){const i=e*20,t=(e+1)*20;r.push(`${o.colors[e]} ${i}%`),r.push(`${o.colors[e]} ${t}%`)}return`linear-gradient(to bottom, ${r.join(", ")})`}else if(o.type==="vertical"){const r=[];for(let e=0;e<5;e++){const i=e*20,t=(e+1)*20;r.push(`${o.colors[e]} ${i}%`),r.push(`${o.colors[e]} ${t}%`)}return`linear-gradient(to right, ${r.join(", ")})`}else if(o.type==="diagonal"){const r=[];for(let e=0;e<5;e++){const i=e*20,t=(e+1)*20;r.push(`${o.colors[e]} ${i}%`),r.push(`${o.colors[e]} ${t}%`)}return`linear-gradient(45deg, ${r.join(", ")})`}else if(o.type==="checkerboard"){const l=o.colors[0].replace("#","%23"),r=o.colors[1].replace("#","%23");let e="";for(let i=0;i<4;i++)for(let t=0;t<4;t++){const n=(i+t)%2===0?l:r;e+=`<rect x='${t*25}' y='${i*25}' width='25' height='25' fill='${n}'/>`}return`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>${e}</svg>")`}else if(o.type==="quartersquare"){const l=o.colors[0].replace("#","%23"),r=o.colors[1].replace("#","%23"),e=o.colors[2].replace("#","%23"),i=o.colors[3].replace("#","%23");return`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><polygon points='0,0 100,0 50,50' fill='${l}'/><polygon points='100,0 100,100 50,50' fill='${r}'/><polygon points='100,100 0,100 50,50' fill='${e}'/><polygon points='0,100 0,0 50,50' fill='${i}'/></svg>")`}return""}function D(){const l=document.getElementById("designerPatternType").value,r=document.getElementById("colorStripePicker");r.innerHTML="";let e=1,i=["#ff6b9d"];l==="solid"?(e=1,i=["#ff6b9d"]):l==="horizontal"||l==="vertical"||l==="diagonal"?(e=5,i=["#ff6b9d","#764ba2","#667eea","#f093fb","#4facfe"]):l==="checkerboard"?(e=2,i=["#ff6b9d","#667eea"]):l==="quartersquare"&&(e=4,i=["#ff6b9d","#764ba2","#667eea","#f093fb"]);for(let t=0;t<e;t++){const n=document.createElement("input");n.type="color",n.value=i[t],r.appendChild(n)}}function A(){const l=document.getElementById("designerPatternType").value,r=document.querySelectorAll('#colorStripePicker input[type="color"]'),e=Array.from(r).map(t=>t.value),i={type:l,colors:e,rotation:0};b.push(i),E()}function E(){const o=document.getElementById("libraryItems");if(o.innerHTML="",b.length===0){o.innerHTML='<p style="color: #999; font-style: italic;">No patterns yet. Design one above to get started!</p>';return}b.forEach((l,r)=>{const e=document.createElement("div");e.className="library-item",e.draggable=!0;const i=O(l);l.type==="solid"?(e.style.backgroundColor=i,e.style.backgroundImage="none"):(e.style.backgroundImage=i,e.style.backgroundColor="transparent",e.style.backgroundRepeat="no-repeat"),e.addEventListener("dragstart",n=>{w=r,e.classList.add("dragging")}),e.addEventListener("dragend",n=>{e.classList.remove("dragging"),w=null}),e.addEventListener("touchstart",n=>{w=r,h=null,e.classList.add("dragging"),N(e,n.touches[0]),n.stopPropagation()}),e.addEventListener("touchmove",n=>{n.preventDefault();const c=n.touches[0];R(c);const s=document.elementFromPoint(c.clientX,c.clientY);document.querySelectorAll(".quilt-square.drag-over").forEach(g=>{g.classList.remove("drag-over")}),s&&s.classList.contains("quilt-square")&&s.classList.add("drag-over")}),e.addEventListener("touchend",n=>{n.preventDefault(),e.classList.remove("dragging"),H();const c=n.changedTouches[0],s=document.elementFromPoint(c.clientX,c.clientY);if(document.querySelectorAll(".quilt-square.drag-over").forEach(g=>{g.classList.remove("drag-over")}),s&&s.classList.contains("quilt-square")){const g=document.getElementById("quilt"),y=Array.from(g.children).indexOf(s),S=window.innerHeight>window.innerWidth;if(y!==-1){const f=S?y:L(y);u[f]=JSON.parse(JSON.stringify(b[r]));const q=u[f],d=O(q),a=s;q.type==="solid"?(a.style.backgroundColor=d,a.style.backgroundImage="none"):(a.style.backgroundImage=d,a.style.backgroundColor="transparent",a.style.backgroundRepeat="no-repeat"),a.style.transform=`rotate(${q.rotation||0}deg)`}}w=null});const t=document.createElement("button");t.className="delete-btn",t.textContent="Ã—",t.onclick=n=>{n.stopPropagation(),b.splice(r,1),E()},e.appendChild(t),o.appendChild(e)})}function J(){const o=window.innerHeight>window.innerWidth,l=o?6:8,r=o?8:6,e=100,i=document.createElement("canvas");i.width=l*e,i.height=r*e;const t=i.getContext("2d");for(let n=0;n<r*l;n++){const c=Math.floor(n/l),g=n%l*e,y=c*e,S=o?n:L(n),f=u[S],q=f.rotation||0;if(t.save(),q!==0?(t.translate(g+e/2,y+e/2),t.rotate(q*Math.PI/180),t.translate(-e/2,-e/2)):t.translate(g,y),f.type==="solid")t.fillStyle=f.colors[0],t.fillRect(0,0,e,e),t.restore();else if(f.type==="horizontal"){const d=e/5;for(let a=0;a<5;a++)t.fillStyle=f.colors[a],t.fillRect(0,a*d,e,d);t.restore()}else if(f.type==="vertical"){const d=e/5;for(let a=0;a<5;a++)t.fillStyle=f.colors[a],t.fillRect(a*d,0,d,e);t.restore()}else if(f.type==="diagonal"){t.beginPath(),t.rect(0,0,e,e),t.clip(),t.translate(e/2,e/2),t.rotate(-45*Math.PI/180);const d=e*Math.sqrt(2),a=d/5;for(let m=0;m<5;m++)t.fillStyle=f.colors[m],t.fillRect(-d/2+m*a,-d/2,a,d);t.restore()}else if(f.type==="checkerboard"){const d=e/4;for(let a=0;a<4;a++)for(let m=0;m<4;m++){const B=(a+m)%2;t.fillStyle=f.colors[B],t.fillRect(m*d,a*d,d,d)}t.restore()}else if(f.type==="quartersquare"){const d=e/2,a=e/2;t.fillStyle=f.colors[0],t.beginPath(),t.moveTo(0,0),t.lineTo(e,0),t.lineTo(d,a),t.closePath(),t.fill(),t.fillStyle=f.colors[1],t.beginPath(),t.moveTo(e,0),t.lineTo(e,e),t.lineTo(d,a),t.closePath(),t.fill(),t.fillStyle=f.colors[2],t.beginPath(),t.moveTo(e,e),t.lineTo(0,e),t.lineTo(d,a),t.closePath(),t.fill(),t.fillStyle=f.colors[3],t.beginPath(),t.moveTo(0,e),t.lineTo(0,0),t.lineTo(d,a),t.closePath(),t.fill(),t.restore()}}i.toBlob(n=>{if(n){const c=URL.createObjectURL(n),s=document.createElement("a");s.href=c,s.download=`quilt-${Date.now()}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(c)}})}function Q(){const o={patterns:u,library:b,savedAt:new Date().toISOString()},l=JSON.stringify(o,null,2),r=new Blob([l],{type:"application/json"}),e=URL.createObjectURL(r),i=document.createElement("a");i.href=e,i.download=`quilt-design-${Date.now()}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(e)}function U(o){var e;const l=(e=o.files)==null?void 0:e[0];if(!l)return;const r=new FileReader;r.onload=function(i){var t;try{const n=JSON.parse((t=i.target)==null?void 0:t.result);n.patterns&&n.patterns.length===48&&(u=n.patterns,P()),n.library&&(b=n.library,E()),alert("Quilt loaded successfully!")}catch(n){alert("Error loading quilt: "+n.message)}o.value=""},r.readAsText(l)}function L(o){const l=Math.floor(o/8),e=o%8,i=5-l;return e*6+i}function F(){window.innerHeight>window.innerWidth?(k=8,C=6):(k=6,C=8)}function x(o,l){const r=O(l);l.type==="solid"?(o.style.backgroundColor=r,o.style.backgroundImage="none"):(o.style.backgroundImage=r,o.style.backgroundColor="transparent",o.style.backgroundRepeat="no-repeat"),o.style.transform=`rotate(${l.rotation||0}deg)`}function P(){const o=document.getElementById("quilt");o.innerHTML="",F(),$=j();const l=window.innerHeight>window.innerWidth;u.length!==48&&W();for(let r=0;r<k*C;r++){const e=document.createElement("div");e.className="quilt-square";const i=l?r:L(r),t=u[i];x(e,t),e.style.width=`${$}px`,e.style.height=`${$}px`,e.draggable=!0,e.addEventListener("dragstart",n=>{h=r,e.classList.add("dragging")}),e.addEventListener("dragend",n=>{e.classList.remove("dragging"),h=null}),e.addEventListener("dblclick",n=>{n.preventDefault(),M(r)}),e.addEventListener("dragover",n=>{n.preventDefault(),e.classList.add("drag-over")}),e.addEventListener("dragleave",n=>{e.classList.remove("drag-over")}),e.addEventListener("drop",n=>{n.preventDefault(),e.classList.remove("drag-over");const c=l?r:L(r);if(w!==null)u[c]=JSON.parse(JSON.stringify(b[w])),x(e,u[c]);else if(h!==null&&h!==r){const s=l?h:L(h);u[c]=JSON.parse(JSON.stringify(u[s])),x(e,u[c])}}),e.addEventListener("touchstart",n=>{const c=new Date().getTime(),s=c-I;if(s<300&&s>0&&T===r){n.preventDefault(),M(r),I=0,T=-1;return}I=c,T=r,h=r,e.classList.add("dragging"),N(e,n.touches[0]),n.preventDefault()}),e.addEventListener("touchmove",n=>{n.preventDefault();const c=n.touches[0];R(c);const s=document.elementFromPoint(c.clientX,c.clientY);document.querySelectorAll(".quilt-square.drag-over").forEach(g=>{g.classList.remove("drag-over")}),s&&s.classList.contains("quilt-square")&&s.classList.add("drag-over")}),e.addEventListener("touchend",n=>{n.preventDefault(),e.classList.remove("dragging"),H();const c=n.changedTouches[0],s=document.elementFromPoint(c.clientX,c.clientY);if(document.querySelectorAll(".quilt-square.drag-over").forEach(g=>{g.classList.remove("drag-over")}),s&&s.classList.contains("quilt-square")){const g=Array.from(o.children).indexOf(s);if(h!==null&&g!==-1&&h!==g){const y=l?g:L(g);if(w!==null)u[y]=JSON.parse(JSON.stringify(b[w]));else{const S=l?h:L(h);u[y]=JSON.parse(JSON.stringify(u[S]))}x(s,u[y])}}h=null,w=null}),o.appendChild(e)}}window.addEventListener("resize",P);window.addEventListener("orientationchange",P);window.updateColorPickers=D;window.addPatternToLibrary=A;window.exportQuiltAsPNG=J;window.saveQuilt=Q;window.loadQuilt=U;W();P();D();E();
